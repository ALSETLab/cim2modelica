### _User guide on how to use the CIM 2 MODelica Transformation Tool_

**1. Run-Time execution installation**

Installation requirements for CIM To MODelica Transformation Tool

1. Make sure you have the latest JAVA runtime installed (JAVA 1.8 or later). This can be checked by running the command _java -version_ in a terminal, in any version of Windows, Linux or MacOS.

2. Make sure you have installed the Apache JENA and the JAXB libraries. Otherwise, you can download them from the following links:

   a. [Apache JENA](https://jena.apache.org)
   
   b. [JAVA JAXB](https://github.com/javaee/jaxb-v2)

**Note:** _The cim2modelica.jar includes these two libraries. The .jar file should execute without problems, otherwise, check your JAVA installation status._

**2. Tool Set-up**

Create a working folder where to download and place the required files for testing, following this steps:

1. Copy inside the working folder the **cim2modelica.jar** file (It contains the necessary libraries to run the code)

2. Copy the **./res** folder and its content, into the working folder. Make sure that the ./res folder contains the following files:

3. The folder **./res/**** map**, which contains the mapping rules.

4. The folder **./res/**** network** containing the CIM files of the network model

**3. Using the tool:**

Open a console terminal and go to the working directory where you have placed the _cim2modelica.jar_ file. Use the command:

**$ java –jar cim2modelica.jar –d &lt;model_name&gt; &lt;PathFolderCIMFiles&gt;**

where:

1. Option **–d** indicates that the input parameter of the .jar file is the folder relative path that contains the CIM profile files.

2. **&lt;model_name&gt;** - name for the resulting Modelica model

3. **&lt;PathFolderCIMFiles&gt;** indicates the folder that contains the CIM profiles&#39; files, i.e. _./res/network/CIMModel/_. The folder must contain the following profiles:

   a. _$PathFolderCIMFiles/*___EQ.xml_ - equipment profile CIM file

   b. _$PathFolderCIMFiles/*___TP.xml_ - topology profile CIM file

   c. _$PathFolderCIMFiles/*___SV.xml_ - state variable profile CIM file

   d. _$PathFolderCIMFiles/*___DY.xml_ - dynamics profile CIM file

Use the option **–p** to indicate the relative path of the profile files individually, in the following order:

**$ java –jar cim2modelica.jar –p &lt;model_name&gt; &lt;$PathFolderCIMFiles/*_EQ.xml&gt; &lt;$PathFolderCIMFiles/*_TP.xml&gt; &lt;$PathFolderCIMFiles/*_SV.xml&gt; &lt;$PathFolderCIMFiles/*_DY.xml&gt;**

As output files, the cim2modelica tool will save the generated Modelica files into the folder **./model**.

![Modelica files auto generated by the transformation tool. Machines with controllers are stored in the .mo files, under the ./PowerPlant folder][id1]

[id1]: https://github.com/ALSETLab/cim2modelica/blob/master/docs/img/figureFinalModel.png 

The tool can be used in a Graphical User Interface (GUI), such as shown in next figure. In this case the tool is used with the parameter –p, indicating name of the four CIM profile files form the model.
![Example of how to use the transformation tool from a GUI interface. The GUI shows the inputs that the tool receives when executed with the –p option][id2]

[id2]: https://github.com/ALSETLab/cim2modelica/blob/master/docs/img/figureGUIprototype.png

**4. Errors using the tool**

In case the relative path of the CIM profiles&#39; folder is wrong, an error similar like the following will occur:
![Exception when file not found](https://github.com/ALSETLab/cim2modelica/blob/master/docs/img/figureExceptionLoadingFile.png) 
