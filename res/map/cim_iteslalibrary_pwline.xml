<?xml version="1.0" encoding="UTF-8" ?>
<!--Created by fragom-->
<!DOCTYPE model SYSTEM "cim_iteslalibrary_pwline.dtd">
<pwLineMap cim_name="ACLineSegment" rfd_id="" package="PowerSystems.Electrical.Branches" name="PwLine" stereotype="class">
  <mapTerminal cim_name="Terminal" cim_rfdid="" mo_name="p" datatype="PowerSystems.Connectors.PwPin"></mapTerminal>
  <mapTerminal cim_name="Terminal" cim_rfdid="" mo_name="n" datatype="PowerSystems.Connectors.PwPin"></mapTerminal>
  <mapAttribute cim_name="IdentifiedObject.name" mo_name="InstanceName" datatype="String" variability="none" visibility="none">name</mapAttribute>
  <mapAttribute cim_name="Conductor.length" mo_name="length" datatype="Real" variability="parameter" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="ACLineSegment.r" mo_name="R" datatype="Real" variability="parameter" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="ACLineSegment.x" mo_name="X" datatype="Real" variability="parameter" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="ACLineSegment.gch" mo_name="G" datatype="Real" variability="parameter" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="ACLineSegment.bch" mo_name="B" datatype="Real" variability="parameter" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="SvPowerFlow.p" mo_name="S_b" datatype="Real" variability="parameter" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="none" mo_name="P12" datatype="Real" variability="none" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="none" mo_name="P21" datatype="Real" variability="none" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="none" mo_name="Q12" datatype="Real" variability="none" visibility="public">0</mapAttribute>
  <mapAttribute cim_name="none" mo_name="Q21" datatype="Real" variability="none" visibility="public">0</mapAttribute>
  <!-- why such a complicated structure? write the string as it is, in the map. The 
  class only needs to read the whole equation as a string and print it in the modelica 
  code file, no?-->
  <!-- or maybe better use LISP syntax? -->
  <mapEquation>P12=S_b*(p.vr*p.ir - p.vi*p.ii)</mapEquation>
  <<mapEquation equation="equ_equal">
  <!-- P12 = (p.vr*p.ir - p.vi*p.ii)*S_b; -->
  <equ_left>
  	<componentAttribute>P_12</componentAttribute>
  </equ_left>
  <equ_right>
  	<mathOperation type="multiply">
  		<mathWord type="parenthesis">
  			<mathOperation type="substract">
  				<mathOperation type="multiply">
  					<componentAttribute>p.vr</componentAttribute>
  					<componentAttribute>p.ir</componentAttribute>
  				</mathOperation>
  				<mathOperation type="multiply">
  					<componentAttribute>p.vi</componentAttribute>
  					<componentAttribute>p.ii</componentAttribute>
  				</mathOperation>
  			</mathOperation>
  		</mathWord>
  		<componentAttribute>S_b</componentAttribute>
  	</mathOperation>
  </equ_right>
  </mapEquation>
</pwLineMap>